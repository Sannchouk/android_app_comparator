import{r as e,a7 as t,a2 as a,H as n,al as i,m as s,q as o,z as r,s as u,G as l}from"./main.js";import{l as m}from"./layout-c7d0a2f4.js";import{b as d,j as c,l as h}from"./teamsXhr-daa8aa39.js";class f{constructor(a){this.teamId=a,d(a).then((t=>{this.team=t,e()})).catch(t)}join(e){const n=this.team;if(!n)return null;const i=n.open?null:e[0].value;c(n.id,i).then((e=>{e.ok||a.show({text:"Join failed",duration:"short"}),this.reload(this.teamId)})).catch(t)}leave(){const e=this.team;if(!e)return null;h(e.id).then((e=>{e.ok||a.show({text:"Leave failed",duration:"short"}),this.reload(this.teamId)})).catch(t)}reload(a){d(a,!0).then((t=>{this.team=t,e()})).catch(t)}}function v(e){const t=e.patron?s("span.patron.userStatus",{"data-icon":"î€™"},[]):null,a=e.title?s("span.userTitle",[e.title+" "]):null;return s("div.user",[s("span",[r("teamLeaders",1)+": "]),t,a,e.name])}function p(e){const t=e.team;if(!t)return null;const a=t.open?null:s("textarea.joinMessage",{id:"message",minLength:30,maxLength:2e3},["Hello, I would like to join the team!"]);return s("div.teamJoinLeave",[s("form",{id:"joinForm",onsubmit:t=>{t.preventDefault(),e.join(t.target)}},[a,s("button.fatButton.joinLeaveButton",{type:"submit"},[s("span.fa.fa-check"),o("joinTeam")])])])}function b(e){return e.team?s("div.teamJoinLeave",[s("form",{id:"leaveForm",onsubmit:t=>{t.preventDefault(),e.leave()}},[s("button.fatButton.joinLeaveButton",{type:"submit"},[s("span.fa.fa-check"),o("quitTeam")])])]):null}var j={oninit({attrs:e}){u.createDefault(),this.ctrl=new f(e.id)},oncreate:l,view(){const e=this.ctrl,t=function(e){const t=e.team;return t?n(null,i(s("div.main_header_title.withSub",[s("h1",[t.name])]))):null}(e),a=function(e){const t=e.team;return t?s("div.teamPage.native_scroller.page",[s("section.teamInfos",[s("div.teamLeader",t.leaders.map(v)),s("div.teamMembers",[t.nbMembers+" "+o("members")]),s("div.teamDescription",[t.description])]),s("section.teamJoinLeave",[t.requested?s("div.teamRequestPending",[s("span",["Your join request is being reviewed by the team leader."])]):t.joined?b(e):p(e)])]):null}(e);return m.free(t,a,void 0)}};export default j;
