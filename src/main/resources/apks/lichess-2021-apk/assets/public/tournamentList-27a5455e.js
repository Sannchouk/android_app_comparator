import{r as t,a7 as s,ck as a,g as e,G as r,s as i,F as n,b as o,aH as c,q as h}from"./main.js";import{l as d}from"./layout-c7d0a2f4.js";import"./TabView-c796731e.js";import{a as f}from"./tournamentXhr-b8f81bd7.js";import{a as u,b as l,n as m}from"./tournamentsListView-044a49a4.js";class w{constructor(e){this.onTabChange=s=>{const a=window.location.search.replace(/\?tab=\w+$/,"");try{window.history.replaceState(window.history.state,"",a+"?tab="+s)}catch(t){}this.currentTab=s,t()},this.currentTab=e||0,f().then((s=>{s.started=s.started.filter(b),s.created=s.created.filter(b),s.finished=s.finished.filter(b),s.started.sort(p),s.finished.sort(y),this.tournaments=s,t()})).catch(s),a("data/positions.json").then((s=>{this.startPositions=s,t()}))}}function b(t){return-1!==e.game.supportedVariants.indexOf(t.variant.key)}function p(t,s){return"lichess"===t.createdBy&&"lichess"===s.createdBy?t.startsAt-s.startsAt:"lichess"===t.createdBy?-1:1}function y(t,s){return s.finishesAt-t.finishesAt}var j={oncreate:r,oninit({attrs:t}){i.createDefault(),this.ctrl=new w(n(t.tab))},view(){const t=this.ctrl,s=u(t),a=o.isConnected()?l():void 0,e=m.view(t);return d.free(c(h("tournaments")),s,a,e)}};export default j;
