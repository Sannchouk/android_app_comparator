import{cd as e,r as s,H as a,al as r,q as t,m as n,a8 as o,g as i,cz as l,cA as g,cB as d,cC as c}from"./main.js";import{l as h}from"./layout-c7d0a2f4.js";let u;const m={oncreate:e,oninit(){this.loading=!1,this.progress=null,this.onProgress=e=>{e.lengthComputable&&(this.progress=e,s())},this.stopLoading=()=>{this.progress?(clearTimeout(u),u=setTimeout((()=>{this.loading=!1,this.progress=null,s()}),1500)):(this.loading=!1,this.progress=null,s())}},view(){const e=a(null,r(t("background")));return h.free(e,function(e){const a=i.general.theme.availableBackgroundThemes,r=i.general.theme.background();return[n("div#bgThemes.native_scroller.page.settings_list.radio_list",{className:e.loading?"loading":""},[n("ul",a.map((a=>{const t=r===a.key;return n("li.list_item",[o.renderRadio(a.name,"bg_theme",a.key,t,(a=>{const r=a.target.value,t=i.general.theme.background();i.general.theme.background(r),new Promise((a=>{l(r)?(e.loading=!0,s(),g("bg",r,e.onProgress).then((()=>{h.onBackgroundChange(r),e.stopLoading(),a(r)})).catch((s=>{i.general.theme.background(t),e.stopLoading(),d(),a(t)}))):(h.onBackgroundChange(r),s(),a(r))})).then((e=>c(e)))}),e.loading),t&&e.progress?n("div.theme-progressBarContainer",[n("div.theme-progressBar",{style:{transform:`translateX(-${100-p(e.progress)}%)`}})]):null])})))])]}(this))}};function p(e){return e.loaded/e.total*100}export default m;
