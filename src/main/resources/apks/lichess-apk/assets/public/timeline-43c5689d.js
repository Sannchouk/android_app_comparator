import{ag as t,t as e,c as a,r as s,a7 as r,G as n,H as o,am as i,q as l,m as u,o as m,E as d,w as c,an as p,B as f}from"./main.js";import{l as y}from"./layout-e08f9316.js";import{a as g,u as w}from"./userView-e85acd19.js";import"./html-1975aa10.js";import"./perfs-9aa7202a.js";import"./countries-a19495bf.js";import"./userXhr-ce47bd25.js";const h=["follow","game-end","tour-join","study-create","study-like","forum-post","blog-post","ublog-post","ublog-post-like","stream-start"];var k={oninit(){this.timelineData=t({entries:[],users:{}}),e().then((t=>{this.timelineData({users:t.users,entries:t.entries.filter((t=>-1!==h.indexOf(t.type))).map((t=>(t.fromNow=a(new Date(t.date)),t)))}),s()})).catch(r)},oncreate:n,view(){const t=o(null,i(l("timeline"))),e=this.timelineData();return y.free(t,[u("ul.timeline.native_scroller.page",{oncreate:m(N,void 0,d)},e.entries.map((t=>$(t,e.users))))])}};function N(t){const e=d(t),a=e&&e.dataset.path,s=e&&e.dataset.external;a&&c.set(a),s&&g(s)}function $(t,e){switch(t.type){case"follow":return function(t){const e=p("xStartedFollowingY",u("strong",t.data.u1),t.data.u2),a="follow"+t.date;return u("li",{className:"list_item timelineEntry",key:a,"data-path":`/@/${t.data.u2}`},u("span",{className:"fa fa-arrow-circle-right"}),e,u("small",null,u("em",null," ",t.fromNow)))}(t);case"game-end":return function(t){const e=f(t.data.perf),a=void 0===t.data.win?l("draw"):t.data.win?"Victory":"Defeat",s="game-end"+t.date;return u("li",{className:"list_item timelineEntry",key:s,"data-icon":e,"data-path":`/game/${t.data.playerId}?goingBack=1`},u("strong",null,a)," vs. ",t.data.opponent,u("small",null,u("em",null," ",t.fromNow)))}(t);case"tour-join":return function(t){const e=p("xCompetesInY",u("strong",t.data.userId),t.data.tourName),a="tour"+t.date;return u("li",{className:"list_item timelineEntry",key:a,"data-path":`/tournament/${t.data.tourId}`},u("span",{className:"fa fa-trophy"}),e,u("small",null,u("em",null," ",t.fromNow)))}(t);case"study-create":case"study-like":return function(t){const e=t.data,a="study-create"===t.type?"hosts":"likes";return u("li.list_item.timelineEntry",{key:"study-like"+t.date,"data-path":`/study/${e.studyId}`},[u("span[data-icon=4].withIcon"),u("strong",e.userId),u("span",` ${a} ${e.studyName} `),u("small",u("em",t.fromNow))])}(t);case"forum-post":return function(t,e){var a;const s=t.data,r=e[s.userId];return u("li.list_item.timelineEntry",{key:"forum-post"+s.postId,"data-external":`/forum/redirect/post/${s.postId}`},[w(!1,null!==(a=r.patron)&&void 0!==a&&a,r.id,r.title),p("xPostedInForumY","",u("strong",s.topicName))," ",u("small",u("em",t.fromNow))])}(t,e);case"blog-post":return function(t){const e=t.data;return u("li.list_item.timelineEntry.blogEntry",{key:"blog-post"+e.id,"data-external":`/blog/${e.id}/${e.slug}`},[u("span[data-icon=6].withIcon"),u("span",e.title)," ",u("small",u("em",t.fromNow))])}(t);case"ublog-post":return function(t,e){var a;const s=t.data,r=e[s.userId];return u("li.list_item.timelineEntry",{key:`ublog-post${s.id}`,"data-external":`/@/${s.userId}/blog/${s.slug}/${s.id}`},[w(!1,null!==(a=r.patron)&&void 0!==a&&a,r.id,r.title),p("xPublishedY","",u("strong",s.title))," ",u("small",u("em",t.fromNow))])}(t,e);case"ublog-post-like":return function(t,e){var a;const s=t.data,r=e[s.userId];return u("li.list_item.timelineEntry",{key:`ublog-post-like${s.id}`,"data-external":`/ublog/${s.id}/redirect`},[w(!1,null!==(a=r.patron)&&void 0!==a&&a,r.id,r.title),p("xLikesY","",u("strong",s.title))," ",u("small",u("em",t.fromNow))])}(t,e);case"stream-start":return function(t){const e=t.data;return u("li.list_item.timelineEntry",{key:`stream-start${e.date}`,"data-external":`/streamer/${e.id}/redirect`},[u("span[data-icon=î€ƒ].withIcon"),u("strong",l("xStartedStreaming",e.name))," ",u("small",u("em",t.fromNow))])}(t);default:return null}}export default k;export{$ as renderTimelineEntry,h as supportedTypes,N as timelineOnTap};
