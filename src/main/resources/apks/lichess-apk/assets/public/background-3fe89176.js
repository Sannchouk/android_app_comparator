import{ce as e,r as s,H as t,am as r,q as a,m as o,a8 as n,g as i,cA as l,cB as g,cC as d,cD as m,I as c,F as u}from"./main.js";import{l as h}from"./layout-e08f9316.js";let p;const f={oncreate:e,oninit(){this.loading=!1,this.progress=null,this.onProgress=e=>{e.lengthComputable&&(this.progress=e,s())},this.stopLoading=()=>{this.progress?(clearTimeout(p),p=setTimeout((()=>{this.loading=!1,this.progress=null,s()}),1500)):(this.loading=!1,this.progress=null,s())}},view(){const e=t(null,r(a("background")));return h.free(e,function(e){const t=i.general.theme.availableBackgroundThemes.filter((e=>{if("system"===e.key&&"android"===c.getPlatform()){const e=u(window.deviceInfo.osVersion);return e&&e>=10}return!0})),r=i.general.theme.background();return[o("div#bgThemes.native_scroller.page.settings_list.radio_list",{className:e.loading?"loading":""},[o("ul",t.map((t=>{const a=r===t.key;return o("li.list_item",[n.renderRadio(t.name,"bg_theme",t.key,a,(t=>{const r=t.target.value,a=i.general.theme.background();i.general.theme.background(r),new Promise((t=>{l(r)?(e.loading=!0,s(),g("bg",r,e.onProgress).then((()=>{e.stopLoading(),t(r)})).catch((s=>{i.general.theme.background(a),e.stopLoading(),d(),t(a)}))):(s(),t(r))})).then((e=>m(e)))}),e.loading),a&&e.progress?o("div.theme-progressBarContainer",[o("div.theme-progressBar",{style:{transform:`translateX(-${100-b(e.progress)}%)`}})]):null])})))])]}(this))}};function b(e){return e.loaded/e.total*100}export default f;
