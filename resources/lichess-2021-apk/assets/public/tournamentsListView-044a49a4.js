import{a5 as e,m as a,q as t,a8 as n,g as s,ar as i,ac as r,w as o,a7 as l,C as u,S as m,E as c,as as d,at as p,au as v,B as f,av as b}from"./main.js";import{T as N,a as _}from"./TabView-c796731e.js";import{c as h}from"./tournamentXhr-b8f81bd7.js";let T=!1;var g={open:function(){o.backbutton.stack.push(k),T=!0},close:k,view:u=>e("tournament_form_popup",void 0,(()=>function(e){return a("form",{id:"tournamentCreateForm",class:"tournamentForm",onsubmit:e=>(e.preventDefault(),function(e){const a=e[0].elements,t=a[0].value,n=a[1].value,i="1"===s.tournament.variant()?a[2].value:"---",r=a[3].value,u=a[4].value,m=a[5].value,c=a[6].value,d=a[7].value,p=a[8].checked?a[8].value:"",v=p?a[9].value:"";h(t,n,i,r,u,m,c,d,p,v).then((e=>{k(),o.set("/tournament/"+e.id)})).catch(l)}(e.target))},a("fieldset",null,a("div",{className:"select_input no_arrow_after"},a("div",{className:"text_input_container"},a("label",null,t("name")," "),a("input",{type:"text",id:"name",className:"textField",autocomplete:"off",autocapitalize:"off",autocorrect:"off",spellcheck:!1}),"Arena")),a("div",{className:"tournament_name_warning"},t("safeTournamentName")," ",t("inappropriateNameWarning")," ",t("emptyTournamentName")),a("div",{className:"select_input"},n.renderSelect("Variant","variant",s.tournament.availableVariants,s.tournament.variant,!1)),void 0!==e.startPositions?a("div",{className:"select_input"+("1"!==s.tournament.variant()?" notVisible":"")},a("label",{for:"select_start_position"},"Position"),a("select",{id:"select_start_position",className:"positions"},a("option",{value:i},"Initial Position"),e.startPositions.map((e=>a("optgroup",{label:e.name},e.positions.map((e=>a("option",{value:e.fen},e.eco+" "+e.name)))))))):null,a("div",{className:"select_input"},n.renderSelect(t("mode"),"mode",s.tournament.availableModes,s.tournament.mode,!1)),a("div",{className:"select_input inline"},n.renderSelect(t("time"),"time",s.tournament.availableTimes,s.tournament.time,!1)),a("div",{className:"select_input inline no-margin"},n.renderSelect(t("increment"),"increment",s.tournament.availableIncrements.map((e=>r(Number(e)))),s.tournament.increment,!1)),a("div",{className:"select_input inline"},n.renderSelect(t("duration"),"duration",s.tournament.availableDurations.map((e=>r(Number(e)))),s.tournament.duration,!1)),a("div",{className:"select_input inline no-margin"},n.renderSelect("Time to Start","timeToStart",s.tournament.availableTimesToStart.map((e=>r(Number(e)))),s.tournament.timeToStart,!1)),a("div",{className:"select_input"},n.renderCheckbox(t("isPrivate"),"private",s.tournament.private)),a("div",{className:"select_input no_arrow_after"+(s.tournament.private()?"":" notVisible")},a("div",{className:"text_input_container"},a("label",null,"Password "),a("input",{type:"text",id:"password",className:"textField",autocomplete:"off",autocapitalize:"off",autocorrect:"off",spellcheck:!1})))),a("div",{className:"popupActionWrapper"},a("button",{className:"popupAction",type:"submit"},a("span",{className:"fa fa-check"}),t("createANewTournament"))))}(u)),T,k)};function k(e){"backbutton"!==e&&T&&o.backbutton.stack.pop(),T=!1}const w=[{label:"In Progress"},{label:"Upcoming"},{label:"Completed"}];function x(e){const a=c(e),t=null==a?void 0:a.dataset;t.id&&o.set("/tournament/"+t.id)}function S(e){if(!e.tournaments)return null;const t=[{id:"started",f:()=>e.tournaments?A(e.tournaments.started):null},{id:"created",f:()=>e.tournaments?A(e.tournaments.created):null},{id:"finished",f:()=>e.tournaments?A(e.tournaments.finished):null}];return[a("div.tabs-nav-header.subHeader",a(N,{buttons:w,selectedIndex:e.currentTab,onTabChange:e.onTabChange})),a(_,{selectedIndex:e.currentTab,tabs:t,onTabChange:e.onTabChange})]}function y(){return a("div",{className:"actions_bar"},a("button",{className:"action_create_button",oncreate:u(g.open)},a("span",{className:"fa fa-plus-circle"}),t("createANewTournament")))}function A(e){return a("ul.native_scroller.tournamentList",{oncreate:m(x,void 0,c)},e.map(C))}function C(e,n){const s=d(e.clock),i=e.rated?t("rated"):t("casual"),r=p(e.minutes),o="standard"!==e.variant.key?v(e.variant.short):"",l=n%2==0?" even ":" odd ",u=function(e){let a="";a=e.battle?"teamBattle":"lichess"!==e.createdBy?"user":e.hasMaxRating?"maxRating":e.schedule?e.schedule.freq:"";return a}(e);return a("li",{key:e.id,className:"list_item tournament_item"+l+u,"data-id":e.id},a("i",{className:"tournamentListIcon","data-icon":P(e)}),a("div",{className:"tournamentListName"},a("div",{className:"fullName"},e.fullName),a("small",{className:"infos"},s," ",o," ",i," â€¢ ",r)),a("div",{className:"tournamentListTime"},a("div",{className:"time"},I(e.startsAt)," ",a("strong",{className:"timeArrow"},"-")," ",I(e.finishesAt)),a("small",{className:"nbUsers withIcon","data-icon":"r"},e.nbPlayers)))}function P(e){var a;return"shield"===(null===(a=e.schedule)||void 0===a?void 0:a.freq)?"5":f(e.perf.key)}function I(e){const a=new Date(e);return b(a.getHours(),2)+":"+b(a.getMinutes(),2)}export{S as a,y as b,g as n,A as r};
