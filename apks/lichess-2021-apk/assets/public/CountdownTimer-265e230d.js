import{an as e,ay as t,m as s}from"./main.js";var i={oninit({attrs:s}){this.rang=!1,this.seconds=s.seconds,this.render=t=>{if(this.el){const i=e(t,s.showOnlySecs?"secs_only":void 0);s.textWrap?this.el.innerHTML=s.textWrap(t,i):this.el.textContent=i}},this.tick=()=>{const e=performance.now(),i=Math.round((e-this.clockTime)/1e3);this.clockTime=e;const o=this.seconds-i,c=o>0?o:0;this.render(c),void 0!==s.emergTime&&!this.rang&&c<s.emergTime&&(this.el&&this.el.classList.add("emerg"),t.lowtime(),this.rang=!0),c<=0?clearTimeout(this.clockTimeoutId):(this.seconds=c,this.clockTimeoutId=setTimeout(this.tick,1e3))}},oncreate({attrs:e,dom:t}){this.el=t,this.seconds=e.seconds,this.render(this.seconds),this.clockTime=performance.now(),this.clockTimeoutId=setTimeout(this.tick,1e3)},onupdate({dom:e}){this.el=e},onremove(){clearTimeout(this.clockTimeoutId)},view:()=>s("div.countdown-timer")};export{i as C};
