import{ce as e,r as a,cE as s,H as l,am as o,q as i,m as t,o as n,E as r,cF as d,ah as c,g as h,cB as m,cC as g,cG as u}from"./main.js";import{l as f}from"./layout-e08f9316.js";const b=h.general.theme;let p;var k={oncreate:e,oninit(){this.loading=!1,this.progress=null,this.selected=b.board(),this.onProgress=e=>{e.lengthComputable&&(this.progress=e,a())},this.stopLoading=()=>{this.progress?(clearTimeout(p),p=setTimeout((()=>{this.loading=!1,this.progress=null,a()}),1500)):(this.loading=!1,this.progress=null,a())},this.isLocal=({key:e,filename:a})=>b.bundledBoardThemes.includes(e)||Boolean(this.localFiles&&this.localFiles["board-"+a]),s("board").then((e=>{this.localFiles=e.reduce(((e,a)=>Object.assign({[a]:"1"},e)),{}),a()}))},view(){const e=l(null,o(i("boardTheme")));return f.free(e,function(e){function s(s){if(e.loading)return;const l=r(s),o=l&&l.dataset.key,i=l&&l.dataset.filename;if(o&&i){const s=e.selected;e.selected=o,b.bundledBoardThemes.includes(o)?(b.board(o),u(o)):(e.loading=!0,m("board",o,e.onProgress).then((()=>{b.board(o),u(o),e.localFiles&&(e.localFiles["board-"+i]="1"),e.stopLoading()})).catch((a=>{e.selected=s,e.stopLoading(),g()}))),a()}}return[t("div.native_scroller.page.settings_list",[t("ul",{oncreate:n(s,void 0,r)},b.availableBoardThemes.map((a=>{const s=a.key===e.selected,l=d(a),o=e.loading&&s;return t("li.list_item.board_theme",{className:c({selected:s,loading:s&&!!e.loading}),"data-key":a.key,"data-filename":l},[t("span.name",a.name),o||e.isLocal({key:a.key,filename:l})?null:t("i.fa.fa-cloud-download"),o?t("i.fa.fa-circle-o-notch.fa-spin"):null,!e.loading&&s?t("i.fa.fa-check"):null,t("div.board_thumbnail.vertical_align",{className:a.key})])})))])]}(this))}};export default k;
