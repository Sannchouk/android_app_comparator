import{ag as t,t as a,c as e,r as s,a7 as n,G as o,H as r,al as l,q as i,m,o as u,E as d,w as c,B as p}from"./main.js";import{l as f}from"./layout-c7d0a2f4.js";import{a as y}from"./browse-1f8ce718.js";const g=["follow","game-end","tour-join","study-create","study-like","forum-post","blog-post"];var w={oninit(){this.timeline=t([]),a().then((t=>{this.timeline(t.entries.filter((t=>-1!==g.indexOf(t.type))).map((t=>(t.fromNow=e(new Date(t.date)),t)))),s()})).catch(n)},oncreate:o,view(){const t=r(null,l(i("timeline")));return f.free(t,[m("ul.timeline.native_scroller.page",{oncreate:u(h,void 0,d)},this.timeline().map(N))])}};function h(t){const a=d(t),e=a&&a.dataset.path,s=a&&a.dataset.external;e&&c.set(e),s&&y(s)}function N(t){switch(t.type){case"follow":return function(t){const a=i("xStartedFollowingY",t.data.u1,t.data.u2),e="follow"+t.date;return m("li",{className:"list_item timelineEntry",key:e,"data-path":`/@/${t.data.u2}`},m("span",{className:"fa fa-arrow-circle-right"}),m.trust(a.replace(/^(\w+)\s/,"<strong>$1&nbsp;</strong>")),m("small",null,m("em",null," ",t.fromNow)))}(t);case"game-end":return function(t){const a=p(t.data.perf),e=void 0===t.data.win?i("draw"):t.data.win?"Victory":"Defeat",s="game-end"+t.date;return m("li",{className:"list_item timelineEntry",key:s,"data-icon":a,"data-path":`/game/${t.data.playerId}?goingBack=1`},m("strong",null,e)," vs. ",t.data.opponent,m("small",null,m("em",null," ",t.fromNow)))}(t);case"tour-join":return function(t){const a=i("xCompetesInY",t.data.userId,t.data.tourName),e="tour"+t.date;return m("li",{className:"list_item timelineEntry",key:e,"data-path":`/tournament/${t.data.tourId}`},m("span",{className:"fa fa-trophy"}),m.trust(a.replace(/^(\w+)\s/,"<strong>$1&nbsp;</strong>")),m("small",null,m("em",null," ",t.fromNow)))}(t);case"study-create":case"study-like":return function(t){const a=t.data,e="study-create"===t.type?"hosts":"likes";return m("li.list_item.timelineEntry",{key:"study-like"+t.date,"data-path":`/study/${a.studyId}`},[m("span[data-icon=4].withIcon"),m("strong",a.userId),m("span",` ${e} ${a.studyName} `),m("small",m("em",t.fromNow))])}(t);case"forum-post":return function(t){const a=t.data;return m("li.list_item.timelineEntry",{key:"forum-post"+a.postId,"data-external":`/forum/redirect/post/${a.postId}`},[m.trust(i("xPostedInForumY",`<strong>${a.userId}</strong>`,`<strong>${a.topicName}</strong>`))," ",m("small",m("em",t.fromNow))])}(t);case"blog-post":return function(t){const a=t.data;return m("li.list_item.timelineEntry.blogEntry",{key:"blog-post"+a.id,"data-external":`/blog/${a.id}/${a.slug}`},[m("span[data-icon=6].withIcon"),m("span",a.title)," ",m("small",m("em",t.fromNow))])}(t);default:return null}}export default w;export{N as renderTimelineEntry,g as supportedTypes,h as timelineOnTap};
